<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>0518</title>

</head>

<body>
  <div id="table"></div>

  <!-- <script src="js/0518-2.js"></script> -->
  <script>
    console.log("fetch로 통신하기");

    document.write("<hr>");
    fetch('https://jsonplaceholder.typicode.com/users')
      .then(response => response.json())
      .then(data => {
        var output = '';
        output += "<table border='1'>";
        output += "<tr>";
        output += "<th>이름</th><th>전화번호</th><th>이메일</th>";
        output += "</tr>";
        for (var i in data) {
          output += "<tr>";
          output += "<td>" + data[i].name + "</td><td>" + data[i].phone + "</td><td>" + data[i].email + "</td>";
          output += "</tr>";
        }
        output += "</table>";
        document.write(output);

        console.log(data);
      });

    document.write("<hr>");
    fetch('https://jsonplaceholder.typicode.com/posts')
      .then(response => response.json())
      .then(data => {

        var output = '';
        output += "<table border='1'>";
        output += "<tr>";
        output += "<th>아이디</th><th>타이틀</th><th>본문</th>";
        output += "</tr>";

        for (var i in data) {
          if (i < 10) {
            output += "<tr>";
            output += "<td><a href='#' onclick=detail(" + data[i].id + ")>" + data[i].id
              + "</a>" + "</td><td>"
              + data[i].title + "</td><td>" + data[i].body + "</td>";
            output += "</tr>";
          }
        }

        output += "</table>";
        document.write(output);

        console.log(data);
      });

    function detail(id) {
      fetch('https://jsonplaceholder.typicode.com/posts?+id=' + id)
        .then(response => response.json())
        .then(data => {
          var output = '';
          output += "<table border='1'>";
          output += "<tr>";
          output += "<th>아이디</th><th>타이틀</th><th>본문</th>";
          output += "</tr>";

          output += "<tr>";
          output += "<td><a href='#'>" + data[id].id
            + "</a>" + "</td><td>"
            + data[id].title + "</td><td>" + data[id].body + "</td>";
          output += "</tr>";

          output += "</table>";
          document.write(output);

          console.log(data);
        });
    }

  </script>

</body>

</html>